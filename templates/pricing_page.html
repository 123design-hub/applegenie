<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>
<body>
    <section>
        <p class="title" style="text-align: center;">Pricing Plans</p>
        <div class="columns">
          {% for product in products %}
            <div class="column">
              <p class="subtitle">{{ product.name }}</p>
              {% for plan in product.plan_set.all %}
                <div>
                  <p class="heading">{{ plan.nickname }}</p>
                  <p>{{ plan.human_readable_price }}</p>
                </div>
              {% endfor %}
            </div>
          {% endfor %}
        </div>
      </section>
      <script async src="https://js.stripe.com/v3/pricing-table.js"></script>
      <div style="color: aqua;">
        <!-- <stripe-pricing-table
 pricing-table-id="{{ stripe_pricing_table_id }}"
 publishable-key="{{ stripe_public_key }}"
 client-reference-id="{{ request.user.id }}"
>
</stripe-pricing-table> -->
<div id="pricing-container">
    <script async src="https://js.stripe.com/v3/pricing-table.js"></script>
<stripe-pricing-table pricing-table-id="prctbl_1Q9kzgGq1ArWfMGKeTXfoTih"
publishable-key="pk_test_51Q8JmpGq1ArWfMGKALDcq9NnVLJKBXoAYPN93jbN9v53QJ8i5dOOyYZJjDYf7BVc91o4yvezRCudjK8vW1j010tM00veH0P5v3">
</stripe-pricing-table>

<!-- <script async src="https://js.stripe.com/v3/pricing-table.js"></script>
<stripe-pricing-table pricing-table-id="prctbl_1Q9l3MGq1ArWfMGKdfwGVhlN"
publishable-key="pk_test_51Q8JmpGq1ArWfMGKALDcq9NnVLJKBXoAYPN93jbN9v53QJ8i5dOOyYZJjDYf7BVc91o4yvezRCudjK8vW1j010tM00veH0P5v3">
</stripe-pricing-table> -->
<!-- 
<script async src="https://js.stripe.com/v3/pricing-table.js"></script>
<stripe-pricing-table pricing-table-id="prctbl_1Q9l5MGq1ArWfMGK0YVlpeTF"
publishable-key="pk_test_51Q8JmpGq1ArWfMGKALDcq9NnVLJKBXoAYPN93jbN9v53QJ8i5dOOyYZJjDYf7BVc91o4yvezRCudjK8vW1j010tM00veH0P5v3">
</stripe-pricing-table>

<script async src="https://js.stripe.com/v3/pricing-table.js"></script>
<stripe-pricing-table pricing-table-id="prctbl_1Q9l3MGq1ArWfMGKdfwGVhlN"
publishable-key="pk_test_51Q8JmpGq1ArWfMGKALDcq9NnVLJKBXoAYPN93jbN9v53QJ8i5dOOyYZJjDYf7BVc91o4yvezRCudjK8vW1j010tM00veH0P5v3">
</stripe-pricing-table> -->
    <!-- <stripe-pricing-table
        pricing-table-id="{{ stripe_pricing_table_id }}"
        publishable-key="{{ stripe_public_key }}"
        client-reference-id="{{ request.user.id }}"
    >
    </stripe-pricing-table> -->
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Wait for a short delay to ensure the pricing table has loaded.
        setTimeout(function() {
            const pricingContainer = document.getElementById('pricing-container');
            // Find all subscription elements rendered by the Stripe component
            const subscriptions = pricingContainer.querySelectorAll('.PlanTableItem');
            
            if (subscriptions.length > 1) {
                // Loop through all subscriptions and hide all except the first one
                subscriptions.forEach((sub, index) => {
                    if (index !== 0) {
                        sub.style.display = 'none';
                    }
                });
            }
        }, 1000); // Adjust the delay time if needed for slower network speeds
    });
</script>

      </div>

</body>
</html>
